---
title: Autenticación
icon: Lock
---

El sistema de autenticación está implementado usando Better Auth, que proporciona una solución robusta y flexible para la gestión de usuarios.

## Proveedores Disponibles

Por defecto, el sistema incluye:

- Email/Password (habilitado por defecto)
- Google OAuth

## Configuración de Proveedores

### Email/Password

Habilitado por defecto sin configuración adicional. Los usuarios pueden:
- Registrarse con email y contraseña
- Iniciar sesión con sus credenciales
- Restablecer su contraseña

### Google OAuth

1. Obtén las credenciales de Google:
   - Ve a [Google Cloud Console](https://console.cloud.google.com)
   - Crea un nuevo proyecto o selecciona uno existente
   - Habilita la API de Google OAuth
   - Crea credenciales de OAuth 2.0
   - Configura los URIs de redirección autorizados:
     ```
     http://localhost:8787/api/auth/callback/google  # Desarrollo
     https://tu-dominio.com/api/auth/callback/google # Producción
     ```

2. Configura las variables de entorno en `apps/api/.env`:
   ```env
   GOOGLE_CLIENT_ID=tu-client-id
   GOOGLE_CLIENT_SECRET=tu-client-secret
   ```

## Agregar Nuevos Proveedores

### 1. Configurar el Backend

Modifica `apps/api/src/utils/auth.ts`:

```typescript
export const auth = betterAuth({
  // ... configuración existente ...
  socialProviders: {
    google: {
      // ... configuración de Google ...
    },
    // Agregar nuevo proveedor
    github: {
      clientId: config.GITHUB_CLIENT_ID,
      clientSecret: config.GITHUB_CLIENT_SECRET,
      redirectURI: `${config.API_URL}/api/auth/callback/github`,
    },
  },
});
```

### 2. Configurar el Frontend

Actualiza `apps/web/app/lib/constants.ts`:

```typescript
export const avaliableProviders = {
  google: {
    name: "Google",
    icon: GoogleIcon,
  },
  // Agregar nuevo proveedor
  github: {
    name: "GitHub",
    icon: GitHubIcon,
  },
};
```

### 3. Agregar Variables de Entorno

Añade las variables necesarias en `apps/api/.env`:

```env
GITHUB_CLIENT_ID=tu-client-id
GITHUB_CLIENT_SECRET=tu-client-secret
```

## Roles y Permisos

El sistema incluye dos roles por defecto:

- `user`: Usuario regular
- `admin`: Administrador con acceso completo

### Características

- El primer usuario registrado recibe automáticamente el rol de `admin`
- Los usuarios subsiguientes reciben el rol de `user`
- Los roles se pueden verificar en los componentes usando el hook `useAuth`
- La navegación se filtra automáticamente según el rol del usuario

## Seguridad

- Todas las rutas protegidas requieren autenticación
- Las contraseñas se hashean antes de almacenarse
- Las sesiones inactivas expiran automáticamente
- Protección contra CSRF implementada 